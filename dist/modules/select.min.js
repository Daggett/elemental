angular.module("elemental.select",["ngResource","elemental.helpers.events"]).directive("elSelect",["$compile","$parse",function(a,b){var c=angular.noop,d=angular.isDefined,e=angular.element,f=/^\s*([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+group\s+by\s+([\s\S]+?))?\s+for\s+(?:([\$\w][\$\w]*)|(?:\(\s*([\$\w][\$\w]*)\s*,\s*([\$\w][\$\w]*)\s*\)))\s+in\s+([\s\S]+?)(?:\s+track\s+by\s+([\s\S]+?))?$/,g={$setViewValue:c};return{restrict:"A",require:["elSelect","?ngModel"],controller:["$element","$scope","$attrs",function(a,b,d){var e,f,h=this,i={},j=g;h.databound=d.ngModel,h.init=function(a,b,c){j=a,e=b,f=c},h.addOption=function(b){assertNotHasOwnProperty(b,'"option value"'),i[b]=!0,j.$viewValue==b&&(a.val(b),f.parent()&&f.remove())},h.removeOption=function(a){this.hasOption(a)&&(delete i[a],j.$viewValue==a&&this.renderUnknownOption(a))},h.renderUnknownOption=function(b){var c="? "+hashKey(b)+" ?";f.val(c),a.prepend(f),a.val(c),f.prop("selected",!0)},h.hasOption=function(a){return i.hasOwnProperty(a)},b.$on("$destroy",function(){h.renderUnknownOption=c})}],link:function(c,g,h,i){function j(c,e,g){function h(){var a,b,f,h,i,o,u,x,y,z,A,B,C,D,E,F={"":[]},G=[""],H=g.$modelValue,I=t(c)||[],J=l?sortedKeys(I):I,K={},L=!1;if(n)if(v&&isArray(H)){L=new HashMap([]);for(var M=0;M<H.length;M++)K[k]=H[M],L.put(v(c,K),H[M])}else L=new HashMap(H);for(A=0;y=J.length,y>A;A++){if(u=A,l){if(u=J[A],"$"===u.charAt(0))continue;K[l]=u}if(K[k]=I[u],a=m(c,K)||"",(b=F[a])||(b=F[a]=[],G.push(a)),n)B=d(L.remove(v?v(c,K):s(c,K)));else{if(v){var N={};N[k]=H,B=v(c,N)===v(c,K)}else B=H===s(c,K);L=L||B}E=j(c,K),E=d(E)?E:"",b.push({id:v?v(c,K):l?J[A]:A,label:E,selected:B})}for(n||(p||null===H?F[""].unshift({id:"",label:"",selected:!L}):L||F[""].unshift({id:"?",label:"",selected:!0})),z=0,x=G.length;x>z;z++){for(a=G[z],b=F[a],w.length<=z?(h={element:r.clone().attr("label",a),label:b.label},i=[h],w.push(i),e.append(h.element)):(i=w[z],h=i[0],h.label!=a&&h.element.attr("label",h.label=a)),C=null,A=0,y=b.length;y>A;A++)f=b[A],(o=i[A+1])?(C=o.element,o.label!==f.label&&C.text(o.label=f.label),o.id!==f.id&&C.val(o.id=f.id),o.selected!==f.selected&&C.prop("selected",o.selected=f.selected)):(""===f.id&&p?D=p:(D=q.clone()).val(f.id).attr("selected",f.selected).text(f.label),i.push(o={element:D,label:f.label,id:f.id,selected:f.selected}),C?C.after(D):h.element.append(D),C=D);for(A++;i.length>A;)i.pop().element.remove()}for(;w.length>z;)w.pop()[0].element.remove()}var i;if(!(i=o.match(f)))throw Exception("iexp","Expected expression in form of '_select_ (as _label_)? for (_key_,)?_value_ in _collection_' but got '{0}'. Element: {1}",o,startingTag(e));var j=b(i[2]||i[1]),k=i[4]||i[6],l=i[5],m=b(i[3]||""),s=b(i[2]?i[1]:k),t=b(i[7]),u=i[8],v=u?b(i[8]):null,w=[[{element:e,label:""}]];p&&(a(p)(c),p.removeClass("ng-scope"),p.remove()),e.empty(),e.on("change",function(){c.$apply(function(){var a,b,d,f,h,i,j,m,o,p=t(c)||[],q={};if(n){for(d=[],i=0,m=w.length;m>i;i++)for(a=w[i],h=1,j=a.length;j>h;h++)if((f=a[h].element)[0].selected){if(b=f.val(),l&&(q[l]=b),v)for(o=0;o<p.length&&(q[k]=p[o],v(c,q)!=b);o++);else q[k]=p[b];d.push(s(c,q))}}else{if(b=e.val(),"?"==b)d=void 0;else if(""===b)d=null;else if(v){for(o=0;o<p.length;o++)if(q[k]=p[o],v(c,q)==b){d=s(c,q);break}}else q[k]=p[b],l&&(q[l]=b),d=s(c,q);w[0].length>1&&w[0][1].id!==b&&(w[0][1].selected=!1)}g.$setViewValue(d)})}),g.$render=h,c.$watch(h)}if(i[1]){var k,l=i[0],m=i[1],n=h.multiple,o=h.ngOptions,p=!1,q=e("<el-option></el-option>"),r=e("<el-optgroup></el-optgroup>"),s=q.clone();g.on("click",function(a){if("el-option"==a.target.tagName.toLowerCase()){var b=e(a.target);g.val(b.val()),g.triggerHandler("change")}});for(var t=0,u=g.children(),v=u.length;v>t;t++)if(""===u[t].value){k=p=u.eq(t);break}l.init(m,p,s),n&&(m.$isEmpty=function(a){return!a||0===a.length}),o&&j(c,g,m)}}}}]);
//# sourceMappingURL=select.min.map